<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduPlatform - Advanced Learning Management System</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Login Page (shown when not authenticated) -->
    <div id="loginPage" class="login-page">
        <div class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <i class="fas fa-graduation-cap"></i>
                    <h1>EduPlatform</h1>
                    <p>Advanced Learning Management System</p>
                </div>
                <form id="loginForm" class="login-form">
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required placeholder="your.email@example.com">
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required placeholder="Enter your password">
                    </div>
                    <div class="form-group">
                        <label for="role">I am a</label>
                        <select id="role" name="role" required>
                            <option value="student">Student</option>
                            <option value="teacher">Teacher</option>
                            <option value="parent">Parent</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-primary btn-block">Sign In</button>
                    <p class="login-footer">Don't have an account? <a href="#" id="showRegister">Register</a></p>
                </form>
                <form id="registerForm" class="login-form" style="display: none;">
                    <div class="form-group">
                        <label for="regName">Full Name</label>
                        <input type="text" id="regName" name="name" required placeholder="John Doe">
                    </div>
                    <div class="form-group">
                        <label for="regEmail">Email</label>
                        <input type="email" id="regEmail" name="email" required placeholder="your.email@example.com">
                    </div>
                    <div class="form-group">
                        <label for="regPassword">Password</label>
                        <input type="password" id="regPassword" name="password" required placeholder="Create a password">
                    </div>
                    <div class="form-group">
                        <label for="regRole">I am a</label>
                        <select id="regRole" name="role" required>
                            <option value="student">Student</option>
                            <option value="teacher">Teacher</option>
                            <option value="parent">Parent</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-primary btn-block">Create Account</button>
                    <p class="login-footer">Already have an account? <a href="#" id="showLogin">Sign In</a></p>
                </form>
                <div id="loginError" class="error-message" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Main Application (shown when authenticated) -->
    <div id="appContainer" style="display: none;">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <i class="fas fa-graduation-cap"></i>
                    EduPlatform
                </div>
                <div class="nav-menu" id="navMenu">
                    <!-- Role-based navigation will be inserted here -->
                </div>
                <div class="nav-profile">
                    <div class="notification-bell" id="notificationBell">
                        <i class="fas fa-bell"></i>
                        <span class="notification-count" id="notificationCount">0</span>
                    </div>
                    <div class="profile-dropdown">
                        <div class="profile-img" id="profileImg">U</div>
                        <div class="profile-menu" id="profileMenu">
                            <div class="profile-info">
                                <div id="profileName">User</div>
                                <div id="profileRole" class="profile-role">Student</div>
                            </div>
                            <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- STUDENT DASHBOARD -->
            <div id="studentDashboard" class="role-dashboard" style="display: none;">
                <div class="dashboard-header">
                    <h1>Welcome back, <span id="studentName">Student</span>! ðŸ‘‹</h1>
                    <p>Track your progress and continue learning</p>
                </div>

                <!-- Stats Cards -->
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="studentActiveCourses">0</h3>
                            <p>Active Courses</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="studentPendingAssignments">0</h3>
                            <p>Pending Assignments</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #ffd700, #ff8c00);">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="studentPoints">0</h3>
                            <p>Points Earned</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="studentAverageGrade">0%</h3>
                            <p>Average Grade</p>
                        </div>
                    </div>
                </div>

                <!-- Dashboard Grid -->
                <div class="dashboard-grid">
                    <!-- Learning Progress -->
                    <div class="dashboard-card">
                        <h3><i class="fas fa-route"></i> Learning Progress</h3>
                        <div class="learning-path">
                            <div class="progress-ring">
                                <svg class="progress-svg" width="120" height="120">
                                    <circle cx="60" cy="60" r="50" stroke="#e0e0e0" stroke-width="8" fill="none"/>
                                    <circle cx="60" cy="60" r="50" stroke="#4CAF50" stroke-width="8" fill="none" 
                                            stroke-dasharray="314" stroke-dashoffset="94" class="progress-circle" id="studentProgressCircle"/>
                                </svg>
                                <div class="progress-text" id="studentProgressText">0%</div>
                            </div>
                            <p id="studentCurrentCourse">No active course</p>
                            <button class="btn-primary" id="continueLearningBtn">Continue Learning</button>
                        </div>
                    </div>

                    <!-- Upcoming Classes -->
                    <div class="dashboard-card">
                        <h3><i class="fas fa-calendar-alt"></i> Upcoming Classes</h3>
                        <div class="class-list" id="studentUpcomingClasses">
                            <div class="empty-state">No upcoming classes</div>
                        </div>
                    </div>

                    <!-- AI Tutor -->
                    <div class="dashboard-card">
                        <h3><i class="fas fa-robot"></i> AI Tutor Assistant</h3>
                        <div class="ai-tutor">
                            <div class="ai-avatar">
                                <i class="fas fa-brain"></i>
                            </div>
                            <p>Need help with your studies? Ask me anything!</p>
                            <button class="btn-primary" id="openAIChatBtn">Start Chat</button>
                        </div>
                    </div>

                    <!-- Recent Achievements -->
                    <div class="dashboard-card">
                        <h3><i class="fas fa-medal"></i> Recent Achievements</h3>
                        <div class="achievement-list" id="studentAchievements">
                            <div class="empty-state">No achievements yet. Keep learning!</div>
                        </div>
                    </div>

                    <!-- Pending Assignments -->
                    <div class="dashboard-card dashboard-card-wide">
                        <h3><i class="fas fa-clipboard-list"></i> Pending Assignments</h3>
                        <div class="assignments-list" id="studentPendingAssignmentsList">
                            <div class="empty-state">No pending assignments</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TEACHER DASHBOARD -->
            <div id="teacherDashboard" class="role-dashboard" style="display: none;">
                <div class="dashboard-header">
                    <h1>Teacher Dashboard</h1>
                    <p>Manage courses, assignments, and track student progress</p>
                </div>

                <!-- Teacher Stats -->
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                            <i class="fas fa-chalkboard-teacher"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="teacherTotalCourses">0</h3>
                            <p>Total Courses</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="teacherTotalStudents">0</h3>
                            <p>Total Students</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="teacherTotalAssignments">0</h3>
                            <p>Assignments</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b, #38f9d7);">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="teacherTotalSubmissions">0</h3>
                            <p>Submissions</p>
                        </div>
                    </div>
                </div>

                <!-- Teacher Dashboard Grid -->
                <div class="dashboard-grid">
                    <!-- Course Performance -->
                    <div class="dashboard-card dashboard-card-wide">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-bar"></i> Course Performance</h3>
                            <button class="btn-secondary btn-sm" id="createCourseBtn">+ New Course</button>
                        </div>
                        <div class="performance-table" id="teacherCoursePerformance">
                            <div class="empty-state">No courses yet. Create your first course!</div>
                        </div>
                    </div>

                    <!-- Recent Student Activity -->
                    <div class="dashboard-card">
                        <h3><i class="fas fa-user-clock"></i> Recent Activity</h3>
                        <div class="activity-list" id="teacherRecentActivity">
                            <div class="empty-state">No recent activity</div>
                        </div>
                    </div>

                    <!-- Pending Grading -->
                    <div class="dashboard-card">
                        <h3><i class="fas fa-clipboard-check"></i> Pending Grading</h3>
                        <div class="grading-list" id="teacherPendingGrading">
                            <div class="empty-state">No assignments to grade</div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="dashboard-card">
                        <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
                        <div class="quick-actions">
                            <button class="action-btn" id="createAssignmentBtn">
                                <i class="fas fa-plus-circle"></i>
                                <span>Create Assignment</span>
                            </button>
                            <button class="action-btn" id="viewMessagesBtn">
                                <i class="fas fa-envelope"></i>
                                <span>View Messages</span>
                            </button>
                            <button class="action-btn" id="viewAnalyticsBtn">
                                <i class="fas fa-chart-pie"></i>
                                <span>View Analytics</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PARENT DASHBOARD -->
            <div id="parentDashboard" class="role-dashboard" style="display: none;">
                <div class="dashboard-header">
                    <h1>Parent Dashboard</h1>
                    <p>Monitor your child's learning progress and achievements</p>
                </div>

                <!-- Parent Stats -->
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="parentChildName">Child</h3>
                            <p>Student Name</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="parentAverageGrade">0%</h3>
                            <p>Average Grade</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #ffd700, #ff8c00);">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="parentPoints">0</h3>
                            <p>Points Earned</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b, #38f9d7);">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="parentCompletedAssignments">0</h3>
                            <p>Completed</p>
                        </div>
                    </div>
                </div>

                <!-- Parent Dashboard Grid -->
                <div class="dashboard-grid">
                    <!-- Progress Overview -->
                    <div class="dashboard-card dashboard-card-wide">
                        <h3><i class="fas fa-chart-area"></i> Progress Overview</h3>
                        <div class="progress-chart" id="parentProgressChart">
                            <div class="progress-bar-container">
                                <div class="progress-bar" id="parentOverallProgress" style="width: 0%"></div>
                            </div>
                            <p class="progress-label">Overall Progress: <span id="parentProgressPercent">0%</span></p>
                        </div>
                    </div>

                    <!-- Recent Grades -->
                    <div class="dashboard-card">
                        <h3><i class="fas fa-star"></i> Recent Grades</h3>
                        <div class="grades-list" id="parentRecentGrades">
                            <div class="empty-state">No grades available</div>
                        </div>
                    </div>

                    <!-- Achievements -->
                    <div class="dashboard-card">
                        <h3><i class="fas fa-medal"></i> Achievements</h3>
                        <div class="achievement-list" id="parentAchievements">
                            <div class="empty-state">No achievements yet</div>
                        </div>
                    </div>

                    <!-- Teacher Communication -->
                    <div class="dashboard-card">
                        <h3><i class="fas fa-comments"></i> Teacher Messages</h3>
                        <div class="messages-preview" id="parentMessages">
                            <div class="empty-state">No messages</div>
                        </div>
                        <button class="btn-primary btn-block" id="parentMessageBtn">Contact Teacher</button>
                    </div>
                </div>
            </div>

            <!-- Shared Sections (Courses, Assignments, Analytics) -->
            <section id="courses" class="section" style="display: none;">
                <div class="section-header">
                    <h2>My Courses</h2>
                    <div class="course-filters">
                        <button class="filter-btn active">All</button>
                        <button class="filter-btn">In Progress</button>
                        <button class="filter-btn">Completed</button>
                    </div>
                </div>
                <div class="courses-grid" id="coursesGrid">
                    <div class="empty-state">No courses available</div>
                </div>
            </section>

            <section id="assignments" class="section" style="display: none;">
                <div class="section-header">
                    <h2>Assignments</h2>
                    <div class="assignment-tabs">
                        <button class="tab-btn active" data-tab="pending">Pending</button>
                        <button class="tab-btn" data-tab="submitted">Submitted</button>
                        <button class="tab-btn" data-tab="graded">Graded</button>
                    </div>
                </div>
                <div class="assignments-container" id="assignmentsContainer">
                    <div class="empty-state">No assignments available</div>
                </div>
            </section>

            <section id="analytics" class="section" style="display: none;">
                <div class="section-header">
                    <h2>Learning Analytics</h2>
                </div>
                <div class="analytics-container" id="analyticsContainer">
                    <div class="empty-state">Analytics data will be displayed here</div>
                </div>
            </section>
        </main>
    </div>

    <!-- AI Chat Modal -->
    <div id="aiChatModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-robot"></i> AI Tutor Assistant</h3>
                <span class="close" id="closeAIChatBtn">&times;</span>
            </div>
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div style="padding: 1rem; text-align: center; color: #666;">
                        <i class="fas fa-brain" style="font-size: 2rem; color: #667eea; margin-bottom: 1rem;"></i>
                        <p>Hello! I'm your AI tutor. How can I help you today?</p>
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" placeholder="Ask me anything about your studies..." id="chatInput">
                    <button class="btn-primary" id="sendChatBtn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Panel -->
    <div id="notificationPanel" class="notification-panel">
        <div class="notification-header">
            <h3>Notifications</h3>
            <span class="close-notifications" id="closeNotificationsBtn">&times;</span>
        </div>
        <div class="notification-list" id="notificationList">
            <div class="empty-state">No notifications</div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>
